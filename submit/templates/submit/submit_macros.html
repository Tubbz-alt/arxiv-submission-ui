{% macro submit_nav(submission_id) %}

  <div class="buttons submit-nav" role="navigation">
      <a href="{{ url_for('ui.delete_submission', submission_id=submission_id) }}" name="cancel" class="button has-text-grey is-light is-outlined" style="border:0" value="cancel" aria-label="Cancel submission" title="Cancel submission"><span class="icon"><i class="fa fa-trash fa-lg"></i></a>
      <button name="action" class="button" value="previous" aria-label="Go back one step">Go Back</button>
      <button name="action" type="submit" class="button" value="save_exit" aria-label="Save and Exit">Save and Exit</button>
      <button name="action" class="button is-link" value="next" aria-label="Save and continue">Save and Continue</button>
  </div>

{% endmacro %}

{% macro progress_bar(submission_id, stage, this_stage) %}
  <nav class="is-hidden-mobile" role="navigation" aria-labelledby="progress">
    <p class="sr-only" id="progress">Steps in Submission Process</p>
    <ul class="progressbar">
      <li class="{% if stage.has_completed(stage.Stages.VERIFY_USER) or stage.is_on_or_after(this_stage, stage.Stages.VERIFY_USER) %}is-complete{% endif %} {% if this_stage == stage.Stages.VERIFY_USER %}is-active{% endif %}"><a class="is-size-7" title="Verify user info" href="{% if submission_id %}{{ url_for('ui.verify_user', submission_id=submission_id) }}{% endif %}">Verify User</a></li>
      <li class="{% if stage.has_completed(stage.Stages.AUTHORSHIP) or stage.is_on_or_after(this_stage, stage.Stages.AUTHORSHIP) %}is-complete{% endif %} {% if this_stage == stage.Stages.AUTHORSHIP %}is-active{% endif %}"><a class="is-size-7" title="Confirm authorship" href="{% if submission_id %}{{ url_for('ui.authorship', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Authorship</a></li>
      <li class="{% if stage.has_completed(stage.Stages.LICENSE) or stage.is_on_or_after(this_stage, stage.Stages.LICENSE) %}is-complete{% endif %} {% if this_stage == stage.Stages.LICENSE %}is-active{% endif %}"><a class="is-size-7" title="Choose license" href="{% if submission_id %}{{ url_for('ui.license', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">License</a></li>
      <li class="{% if stage.has_completed(stage.Stages.POLICY) or stage.is_on_or_after(this_stage, stage.Stages.POLICY) %}is-complete{% endif %} {% if this_stage == stage.Stages.POLICY %}is-active{% endif %}"><a class="is-size-7" title="Acknowledge policy" href="{% if submission_id %}{{ url_for('ui.policy', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Policy</a></li>
      {% if stage.is_relevant(stage.Stages.CLASSIFICATION) %}
        <li class="{% if stage.has_completed(stage.Stages.CLASSIFICATION) or stage.is_on_or_after(this_stage, stage.Stages.CLASSIFICATION) %}is-complete{% endif %} {% if this_stage == stage.Stages.CLASSIFICATION %}is-active{% endif %}"><a class="is-size-7" title="Choose category" href="{% if submission_id %}{{ url_for('ui.classification', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Category</a></li>
      {% endif %}
      {% if stage.is_relevant(stage.Stages.CLASSIFICATION) and stage.is_relevant(stage.Stages.CROSS_LIST) %}
        <li class="{% if stage.has_completed(stage.Stages.CLASSIFICATION) or stage.is_on_or_after(this_stage, stage.Stages.CROSS_LIST) %}is-complete{% endif %} {% if this_stage == stage.Stages.CROSS_LIST %}is-active{% endif %}"><a class="is-size-7" title="Add cross-list" href="{% if submission_id %}{{ url_for('ui.cross_list', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Cross-list</a></li>
      {% endif %}
      <li class="{% if stage.has_completed(stage.Stages.FILE_UPLOAD) or stage.is_on_or_after(this_stage, stage.Stages.FILE_UPLOAD) %}is-complete{% endif %} {% if this_stage == stage.Stages.FILE_UPLOAD %}is-active{% endif %}"><a class="is-size-7" title="File upload" href="{% if submission_id %}{{ url_for('ui.file_upload', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Upload Files</a></li>
      <li class="{% if stage.has_completed(stage.Stages.PROCESS) or stage.is_on_or_after(this_stage, stage.Stages.PROCESS) %}is-complete{% endif %} {% if this_stage == stage.Stages.PROCESS %}is-active{% endif %}"><a class="is-size-7" title="File process" href="{% if submission_id %}{{ url_for('ui.file_process', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Process Files</a></li>
      <li class="{% if stage.has_completed(stage.Stages.METADATA) or stage.is_on_or_after(this_stage, stage.Stages.METADATA) %}is-complete{% endif %} {% if this_stage == stage.Stages.METADATA %}is-active{% endif %}"><a class="is-size-7" title="Add metadata" href="{% if submission_id %}{{ url_for('ui.add_metadata', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Metadata</a></li>
      <li class="{% if stage.has_completed(stage.Stages.OPTIONAL) or stage.is_on_or_after(this_stage, stage.Stages.OPTIONAL) %}is-complete{% endif %} {% if this_stage == stage.Stages.OPTIONAL %}is-active{% endif %}"><a class="is-size-7" title="Add optional metadata" href="{% if submission_id %}{{ url_for('ui.add_optional_metadata', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Opt. Metadata</a></li>
      <li class="{% if stage.has_completed(stage.Stages.FINAL_PREVIEW) or stage.is_on_or_after(this_stage, stage.Stages.FINAL_PREVIEW) %}is-complete{% endif %} {% if this_stage == stage.Stages.FINAL_PREVIEW %}is-active{% endif %}"><a class="is-size-7" title="Final preview" href="{% if submission_id %}{{ url_for('ui.final_preview', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Preview</a></li>
      <li class=""><a class="is-size-7" title="Submission confirmed" href="{% if submission_id %}{{ url_for('ui.confirm_submit', submission_id=submission_id) }}{% else %}{{ url_for('ui.verify_user') }}{% endif %}">Confirmed</a></li>
    </ul>
  </nav>

{% endmacro %}
