{% extends "submit/base.html" %}


{% block title -%}Add or Edit Optional Metadata{%- endblock title %}

{% block within_content %}
<form method="POST" action="{{ url_for('ui.add_optional_metadata', submission_id=submission_id) }}">
  {{ form.csrf_token }}
  <div class="columns">
    <div class="column">
      {% with field = form.doi %}
      <div class="field is-short-field">
        <div class="control">
          <label class="label">{{ field.label.text }} <a href="{{ url_for('help_metadata') }}" class="help-bubble">
            <i class="fa fa-question-circle is-info"></i>
            <div class="bubble-text">This field is <strong>only</strong> for a DOI. Separate multiple DOIs with a space.</div></a></label>
          {% if field.errors %}
            <div class="help is-danger">
              {% for error in field.errors %}
                  {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          {% if field.description %}
          <p class="help has-text-grey is-marginless">
            {{ field.description|safe }}
          </p>
          {% endif %}
          {% if field.errors %}
            {{ field(class="input is-danger")|safe }}
          {% else %}
            {{ field(class="input")|safe }}
          {% endif %}
        </div>
      </div>
      {% endwith %}

      {% with field = form.journal_ref %}
      <div class="field is-short-field">
        <div class="control">
          <label class="label">{{ field.label.text }} <a href="{{ url_for('help_metadata') }}" class="help-bubble">
            <i class="fa fa-question-circle is-info"></i>
            <div class="bubble-text">Click for a detailed help page on journal reference formatting.</div></a></label>
          {% if field.errors %}
            <div class="help is-danger">
              {% for error in field.errors %}
                  {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          {% if field.description %}
          <p class="help has-text-grey is-marginless">
            {{ field.description|safe }}
          </p>
          {% endif %}
          {% if field.errors %}
            {{ field(class="input is-danger")|safe }}
          {% else %}
            {{ field(class="input")|safe }}
          {% endif %}
        </div>
      </div>
      {% endwith %}

      {% with field = form.report_num %}
      <div class="field is-short-field">
        <div class="control">
          <label class="label">{{ field.label.text }} <a href="{{ url_for('help_metadata') }}" class="help-bubble">
            <i class="fa fa-question-circle is-info"></i>
            <div class="bubble-text">This field is <strong>only</strong> for an institution-supplied number. Click for a detailed help page.</div></a></label>
          {% if field.errors %}
            <div class="help is-danger">
              {% for error in field.errors %}
                  {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          {% if field.description %}
          <p class="help has-text-grey is-marginless">
            {{ field.description|safe }}
          </p>
          {% endif %}
          {% if field.errors %}
            {{ field(class="input is-danger")|safe }}
          {% else %}
            {{ field(class="input")|safe }}
          {% endif %}
        </div>
      </div>
      {% endwith %}

      {% with field = form.acm_class %}
      <div class="field is-short-field">
        <div class="control">
          <label class="label">{{ field.label.text }} <a href="{{ url_for('help_metadata') }}" class="help-bubble">
            <i class="fa fa-question-circle is-info"></i>
            <div class="bubble-text">For classifications in CS only. Click for a detailed help page.</div></a></label>
          {% if field.errors %}
            <div class="help is-danger">
              {% for error in field.errors %}
                  {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          {% if field.description %}
          <p class="help has-text-grey is-marginless">
            {{ field.description|safe }}
          </p>
          {% endif %}
          {% if field.errors %}
            {{ field(class="input is-danger")|safe }}
          {% else %}
            {{ field(class="input")|safe }}
          {% endif %}
        </div>
      </div>
      {% endwith %}

      {% with field = form.msc_class %}
      <div class="field is-short-field">
        <div class="control">
          <label class="label">{{ field.label.text }} <a href="{{ url_for('help_metadata') }}" class="help-bubble">
            <i class="fa fa-question-circle is-info"></i>
            <div class="bubble-text">For classifications in math only. Click for a detailed help page.</div></a></label>
          {% if field.errors %}
            <div class="help is-danger">
              {% for error in field.errors %}
                  {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          {% if field.description %}
          <p class="help has-text-grey is-marginless">
            {{ field.description|safe }}
          </p>
          {% endif %}
          {% if field.errors %}
            {{ field(class="input is-danger")|safe }}
          {% else %}
            {{ field(class="input")|safe }}
          {% endif %}
        </div>
      </div>
      {% endwith %}
      </div>
      <div class="column">
        <div class="message is-info">
          <div class="message-body">
            <p><span class="icon has-text-link"><i class="fa fa-info-circle"></i></span>If this article has not yet been published elsewhere, this information can be <a href="{{ ('help_jref') }}">added at any later time</a> without submitting a new version.</p>
          </div>
        </div>
      </div>
  </div>

  {{ submit_macros.submit_nav(submission_id) }}
</form>
{% endblock within_content %}
