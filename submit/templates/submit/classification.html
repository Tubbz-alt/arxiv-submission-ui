{% extends "submit/base.html" %}

{% block title -%}Choose a Primary Classification{%- endblock title %}

{% block within_content %}
<form method="POST" action="{{ url_for('ui.classification', submission_id=submission_id) }}">
  {{ form.csrf_token }}
  <div class="columns">
    <div class="column is-two-thirds-tablet is-half-desktop">
      {% with field = form.category %}
      <div class="field">
        <div class="control">
          <div class="is-block">
          {{ field.label(class_="label is-inline-block") }}
          <a href="{{ url_for('account') }}" class="help-bubble">
            <i class="fa fa-question-circle is-info"></i>
            <div class="bubble-text">
              Preferred categories are placed at the top of the selection list. Click on this bubble to add or remove favorites in your user account settings.
            </div>
          </a>
        </div>
          <div class="select">
          {% if field.errors %}
            {{ field(class="is-danger")|safe }}
          {% else %}
            {{ field()|safe }}
          {% endif %}
          </div>
          {% if field.errors %}
            <div class="help is-danger field-error">
              {% for error in field.errors %}
                  {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          {% if field.description %}
          <p class="help has-text-grey">
            {{ field.description|safe }}
          </p>
          {% endif %}
        </div>
      </div>
      {% endwith %}
    </div>

    <div class="column is-one-third-tablet is-half-desktop">
      {% if submitter.endorsements|endorsetype == 'None' %}
      <div class="message is-danger">
        <div class="message-header">
          <p>Endorsements</p>
        </div>
        <div class="message-body">
          <div class="is-pulled-left">
            <span class="icon"><i class="fa fa-exclamation-triangle"></i></span>
          </div>
          <p>Your account does not currently have any endorsed categories. You will need to <a href="{{ url_for('help_endorse') }}">seek endorsement</a> before submitting.</p>
        </div>
      </div>
      {% endif %}
      {% if submitter.endorsements|endorsetype == 'Some' %}
        <div class="message is-link">
          <div class="message-body">
            <p class="has-text-weight-bold"><span class="icon has-text-link"><i class="fa fa-info-circle"></i></span>Endorsements</p>
            <p>This list shows only the categories for which you are endorsed. If you wish to submit to a category not shown here, you will need to <a href="{{ url_for('help_endorse') }}">seek endorsement</a> prior to submission.</p>
          </div>
        </div>
      {% endif %}
      <div class="message is-link">
        <div class="message-header">
          <p><span class="icon"><i class="fa fa-info-circle"></i></span> Choosing a Good Category</p>
        </div>
        <div class="message-body">
          <p>The most specific category for your article is best. If you are not sure, check the <a href="">category descriptions</a>. If there is interest in more than one category for your article, you may choose cross-lists as secondary categories on the following page.</p>
        </div>
      </div>
    </div>
</div> <!-- end columns -->

  {{ submit_macros.submit_nav(submission_id) }}
</form>
{% endblock within_content %}
