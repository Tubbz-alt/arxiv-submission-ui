#!/bin/bash

#TODO Have some way to have a jwt local to the dev env like saved in a gitignored file.
export INTEGRATION_JWT="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzZXNzaW9uX2lkIjoiODQzYWFjZTYtMGY3My00ODQ1LWJlMDAtNzEwZjZkNjMwYmVjIiwic3RhcnRfdGltZSI6IjIwMjAtMDgtMDNUMTQ6NDE6MTAuMDkwNTk4LTA0OjAwIiwidXNlciI6eyJ1c2VybmFtZSI6ImFydGFiYTE4NjRAeWFob28uY29tIiwiZW1haWwiOiJhcnRhYmExODY0QHlhaG9vLmNvbSIsInVzZXJfaWQiOjEwLCJuYW1lIjp7ImZvcmVuYW1lIjoiXHUwNjQ2XHUwNmNjXHUwNmE5XHUwNmNjIiwic3VybmFtZSI6Ilx1MDY0NVx1MDYyY1x1MDYyYVx1MDY0N1x1MDYyZlx1MDZjYyIsInN1ZmZpeCI6Ilx1MDYyN1x1MDYzM1x1MDYyYVx1MDYyN1x1MDYyZiJ9LCJwcm9maWxlIjp7ImFmZmlsaWF0aW9uIjoiQ29ybmVsbCBVbml2ZXJzaXR5IiwiY291bnRyeSI6InVzIiwicmFuayI6Mywic3VibWlzc2lvbl9ncm91cHMiOlsiZ3JwX3BoeXNpY3MiXSwiZGVmYXVsdF9jYXRlZ29yeSI6ImFzdHJvLXBoLkdBIiwiaG9tZXBhZ2VfdXJsIjoiIiwicmVtZW1iZXJfbWUiOnRydWV9LCJ2ZXJpZmllZCI6ZmFsc2V9LCJjbGllbnQiOm51bGwsImVuZF90aW1lIjoiMjAyMC0wOC0wNFQwMDo0MToxMC4wOTA1OTgtMDQ6MDAiLCJhdXRob3JpemF0aW9ucyI6eyJjbGFzc2ljIjowLCJlbmRvcnNlbWVudHMiOlsiKi4qIl0sInNjb3BlcyI6W3siZG9tYWluIjoicHVibGljIiwiYWN0aW9uIjoicmVhZCIsInJlc291cmNlIjpudWxsfSx7ImRvbWFpbiI6InN1Ym1pc3Npb24iLCJhY3Rpb24iOiJjcmVhdGUiLCJyZXNvdXJjZSI6bnVsbH0seyJkb21haW4iOiJzdWJtaXNzaW9uIiwiYWN0aW9uIjoidXBkYXRlIiwicmVzb3VyY2UiOm51bGx9LHsiZG9tYWluIjoic3VibWlzc2lvbiIsImFjdGlvbiI6InJlYWQiLCJyZXNvdXJjZSI6bnVsbH0seyJkb21haW4iOiJzdWJtaXNzaW9uIiwiYWN0aW9uIjoiZGVsZXRlIiwicmVzb3VyY2UiOm51bGx9LHsiZG9tYWluIjoidXBsb2FkIiwiYWN0aW9uIjoicmVhZCIsInJlc291cmNlIjpudWxsfSx7ImRvbWFpbiI6InVwbG9hZCIsImFjdGlvbiI6InVwZGF0ZSIsInJlc291cmNlIjpudWxsfSx7ImRvbWFpbiI6InVwbG9hZCIsImFjdGlvbiI6ImRlbGV0ZSIsInJlc291cmNlIjpudWxsfSx7ImRvbWFpbiI6InVwbG9hZCIsImFjdGlvbiI6InJlYWRfbG9ncyIsInJlc291cmNlIjpudWxsfSx7ImRvbWFpbiI6ImNvbXBpbGUiLCJhY3Rpb24iOiJyZWFkIiwicmVzb3VyY2UiOm51bGx9LHsiZG9tYWluIjoiY29tcGlsZSIsImFjdGlvbiI6ImNyZWF0ZSIsInJlc291cmNlIjpudWxsfSx7ImRvbWFpbiI6InByZXZpZXciLCJhY3Rpb24iOiJyZWFkIiwicmVzb3VyY2UiOm51bGx9LHsiZG9tYWluIjoicHJldmlldyIsImFjdGlvbiI6ImNyZWF0ZSIsInJlc291cmNlIjpudWxsfV19LCJpcF9hZGRyZXNzIjpudWxsLCJyZW1vdGVfaG9zdCI6bnVsbCwibm9uY2UiOm51bGx9.UsNvIrqCTIAhwd3WU8-zrOAFpgRvi0dgYpY9YMy72EE"
export INTEGRATION_URL="http://localhost:8000"

echo "Running integration outside of docker containers."
echo "Running it against $INTEGRATION_URL"

python -m submit.integration.test_integration
